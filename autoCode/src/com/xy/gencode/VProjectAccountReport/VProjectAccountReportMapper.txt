<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.haier.openplatform.alm.project.dao.VProjectAccountReportDAO">
	<!-- oracle 分页头 -->
	<sql id="pagination_Head">
		<![CDATA[select * from ( select row_.*, rownum rownum_ from ( ]]>
	</sql>
	<!-- oracle 分页尾 -->
	<sql id="pagination_Tail">
	  <![CDATA[) row_ where rownum <= #{model.pager.pageSize} * #{model.pager.currentPage} ) where rownum_ >= #{model.pager.firstResult} + 1]]>
	</sql>
	<!-- count * from -->
	<sql id="count_Start_Head">
		<![CDATA[select count(*) from ( ]]>
	</sql>
	<sql id="count_Start_Tail">
		<![CDATA[)]]>
	</sql>

	<resultMap id="vProjectAccountReportMap" type="com.haier.openplatform.alm.project.domain.VProjectAccountReport">
		<result property="projectId" column="project_id" /><!--  -->
		<result property="projectStatus" column="project_status" /><!--  -->
		<result property="projectType" column="project_type" /><!--  -->
		<result property="projectName" column="project_name" /><!--  -->
		<result property="pEstimateSt" column="p_estimate_st" /><!--  -->
		<result property="pEstimateEt" column="p_estimate_et" /><!--  -->
		<result property="pEstimateAmount" column="p_estimate_amount" /><!--  -->
		<result property="pmName" column="pm_name" /><!--  -->
		<result property="contractCode" column="contract_code" /><!--  -->
		<result property="contractStatus" column="contract_status" /><!--  -->
		<result property="contractAmount" column="contract_amount" /><!--  -->
		<result property="firstParty" column="first_party" /><!--  -->
		<result property="firstCode" column="first_code" /><!--  -->
		<result property="supplierCode" column="supplier_code" /><!--  -->
		<result property="supplierName" column="supplier_name" /><!--  -->
		<result property="milestone" column="milestone" /><!--  -->
		<result property="milestoneDesc" column="milestone_desc" /><!--  -->
		<result property="isMilestone" column="is_milestone" /><!--  -->
		<result property="isPayment" column="is_payment" /><!--  -->
		<result property="milestoneStatus" column="milestone_status" /><!--  -->
		<result property="mEstimateSt" column="m_estimate_st" /><!--  -->
		<result property="mEstimateEt" column="m_estimate_et" /><!--  -->
		<result property="mActualEt" column="m_actual_et" /><!--  -->
		<result property="mModifySt" column="m_modify_st" /><!--  -->
		<result property="mModifyEt" column="m_modify_et" /><!--  -->
		<result property="mEstimatePayT" column="m_estimate_pay_t" /><!--  -->
		<result property="mApplyPayT" column="m_apply_pay_t" /><!--  -->
		<result property="mEstimateAmount" column="m_estimate_amount" /><!--  -->
		<result property="mActulAmount" column="m_actul_amount" /><!--  -->
		<result property="mYfwfAmount" column="m_yfwf_amount" /><!--  -->
		<result property="almStatus" column="alm_status" /><!--  -->
		<result property="bccStatus" column="bcc_status" /><!--  -->
		<result property="evsStatus" column="evs_status" /><!--  -->
		<result property="aoCode" column="ao_code" /><!--  -->
		<result property="azCode" column="az_code" /><!--  -->
		<result property="budgetName" column="budget_name" /><!--  -->
		<result property="budgetType" column="budget_type" /><!--  -->
		<result property="budgetYear" column="budget_year" /><!--  -->
		<result property="jyt" column="jyt" /><!--  -->
		<result property="department" column="department" /><!--  -->
		<result property="budgetBu" column="budget_bu" /><!--  -->
		<result property="budgetPl" column="budget_pl" /><!--  -->
		<result property="budgetMark" column="budget_mark" /><!--  -->
		<result property="budgetAmount" column="budget_amount" /><!--  -->
	</resultMap>

	<!-- 保存信息 -->
	<insert id="saveVProjectAccountReport">
		<selectKey keyProperty="model.id" order="BEFORE" resultType="long">
			SELECT XXXX.NEXTVAL FROM DUAL
		</selectKey>
		<![CDATA[
		insert into V_PROJECT_ACCOUNT_REPORT (
			project_id,project_status,project_type,project_name,p_estimate_st,p_estimate_et,p_estimate_amount,pm_name,contract_code,contract_status,contract_amount,first_party,first_code,supplier_code,supplier_name,milestone,milestone_desc,is_milestone,is_payment,milestone_status,m_estimate_st,m_estimate_et,m_actual_et,m_modify_st,m_modify_et,m_estimate_pay_t,m_apply_pay_t,m_estimate_amount,m_actul_amount,m_yfwf_amount,alm_status,bcc_status,evs_status,ao_code,az_code,budget_name,budget_type,budget_year,jyt,department,budget_bu,budget_pl,budget_mark,budget_amount)
		values (
			#{model.projectId},#{model.projectStatus},#{model.projectType},#{model.projectName},#{model.pEstimateSt},#{model.pEstimateEt},#{model.pEstimateAmount},#{model.pmName},#{model.contractCode},#{model.contractStatus},#{model.contractAmount},#{model.firstParty},#{model.firstCode},#{model.supplierCode},#{model.supplierName},#{model.milestone},#{model.milestoneDesc},#{model.isMilestone},#{model.isPayment},#{model.milestoneStatus},#{model.mEstimateSt},#{model.mEstimateEt},#{model.mActualEt},#{model.mModifySt},#{model.mModifyEt},#{model.mEstimatePayT},#{model.mApplyPayT},#{model.mEstimateAmount},#{model.mActulAmount},#{model.mYfwfAmount},#{model.almStatus},#{model.bccStatus},#{model.evsStatus},#{model.aoCode},#{model.azCode},#{model.budgetName},#{model.budgetType},#{model.budgetYear},#{model.jyt},#{model.department},#{model.budgetBu},#{model.budgetPl},#{model.budgetMark},#{model.budgetAmount}			
		   )
		]]>
	</insert>
	<!-- 根据xxx删除 -->
	<delete id="delVProjectAccountReport">
		<![CDATA[
		delete from V_PROJECT_ACCOUNT_REPORT where id = #{model.id}
		]]>
	</delete>
	
	<!-- 保存信息 -->
	<update id="updateVProjectAccountReport" >
		<![CDATA[
		update V_PROJECT_ACCOUNT_REPORT
			set project_id = #{model.projectId},project_status = #{model.projectStatus},project_type = #{model.projectType},project_name = #{model.projectName},p_estimate_st = #{model.pEstimateSt},p_estimate_et = #{model.pEstimateEt},p_estimate_amount = #{model.pEstimateAmount},pm_name = #{model.pmName},contract_code = #{model.contractCode},contract_status = #{model.contractStatus},contract_amount = #{model.contractAmount},first_party = #{model.firstParty},first_code = #{model.firstCode},supplier_code = #{model.supplierCode},supplier_name = #{model.supplierName},milestone = #{model.milestone},milestone_desc = #{model.milestoneDesc},is_milestone = #{model.isMilestone},is_payment = #{model.isPayment},milestone_status = #{model.milestoneStatus},m_estimate_st = #{model.mEstimateSt},m_estimate_et = #{model.mEstimateEt},m_actual_et = #{model.mActualEt},m_modify_st = #{model.mModifySt},m_modify_et = #{model.mModifyEt},m_estimate_pay_t = #{model.mEstimatePayT},m_apply_pay_t = #{model.mApplyPayT},m_estimate_amount = #{model.mEstimateAmount},m_actul_amount = #{model.mActulAmount},m_yfwf_amount = #{model.mYfwfAmount},alm_status = #{model.almStatus},bcc_status = #{model.bccStatus},evs_status = #{model.evsStatus},ao_code = #{model.aoCode},az_code = #{model.azCode},budget_name = #{model.budgetName},budget_type = #{model.budgetType},budget_year = #{model.budgetYear},jyt = #{model.jyt},department = #{model.department},budget_bu = #{model.budgetBu},budget_pl = #{model.budgetPl},budget_mark = #{model.budgetMark},budget_amount = #{model.budgetAmount}  
		where id = #{model.id}
		]]>
	</update>
	
	<!-- 根据ID查询-->
	<select id="getVProjectAccountReportById" parameterType="Long" resultMap="vProjectAccountReportMap">
		<include refid="searchAll_sql" />
		<![CDATA[
		where t.id = #{id}
		]]>
	</select>
	<!-- 根据其他条件查询-->
	<select id="getVProjectAccountReportByVProjectAccountReport" resultMap="vProjectAccountReportMap">
		<include refid="searchAll_sql" />
		<![CDATA[
		where t.id = #{id}
		]]>
	</select>
	
	
	
	<!-- 查询所有字段 -->
	<sql id="searchAll_sql">
		<![CDATA[
	    select project_id,project_status,project_type,project_name,p_estimate_st,p_estimate_et,p_estimate_amount,pm_name,contract_code,contract_status,contract_amount,first_party,first_code,supplier_code,supplier_name,milestone,milestone_desc,is_milestone,is_payment,milestone_status,m_estimate_st,m_estimate_et,m_actual_et,m_modify_st,m_modify_et,m_estimate_pay_t,m_apply_pay_t,m_estimate_amount,m_actul_amount,m_yfwf_amount,alm_status,bcc_status,evs_status,ao_code,az_code,budget_name,budget_type,budget_year,jyt,department,budget_bu,budget_pl,budget_mark,budget_amount
	      from V_PROJECT_ACCOUNT_REPORT t
		  ]]>
	</sql>
	<!-- 根据条件查询 -->
	<sql id="searchWhere_sql">
		<include refid="searchAll_sql" />
		where id = #{model.id}
	</sql>
	
	<!-- 带条件的分页查询 -->
	<select id="searchVProjectAccountReportPagerList"
		resultMap="vProjectAccountReportMap">
		<include refid="pagination_Head" />
		<include refid="searchWhere_sql" />
		<include refid="pagination_Tail" />
	</select>
	<!-- 带条件的分页查询合计 -->
	<select id="getVProjectAccountReportsPagerCount"
		resultType="long">
		<include refid="count_Start_Head" />
		<include refid="searchWhere_sql" />
		<include refid="count_Start_Tail" />
	</select>
	
</mapper>